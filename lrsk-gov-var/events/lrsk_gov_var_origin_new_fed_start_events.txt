# Government Variety Pack
# Events - For Discovery / Tradeways / Grand Alliance
# Author: littleraskol

namespace = lrsk_gov_var_new_fed_starts

# Sets up the research coop/trade league/martial alliance for the related origins.
country_event = {
	id = lrsk_gov_var_new_fed_starts.1
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		set_country_flag = first_contact_event
		set_country_flag = Story2 # Already encountered spacefarers
		if = {
			limit = { has_origin = lrsk_gov_var_origin_for_discovery_mi }
			add_tradition = tr_versatility_adopt
			add_tradition = tr_versatility_universal_compatibility
		}
		else = {
			add_tradition = tr_diplomacy_adopt
			add_tradition = tr_diplomacy_the_federation
		}

		if = {
			limit = { num_guaranteed_colonies >= 2 }
			capital_scope = {
				solar_system = {
					closest_system = {
						limit = { has_star_flag = neighbor_t1_first_colony }
						random_system_planet = {
							limit = { has_planet_flag = prescripted_ideal }
							save_event_target_as = lrsk_fed_planet_1
							federation_origin_planet_setup = yes
						}
					}
					closest_system = {
						limit = { has_star_flag = neighbor_t2_second_colony }
						random_system_planet = {
							limit = { has_planet_flag = prescripted_ideal }
							save_event_target_as = lrsk_fed_planet_2
							federation_origin_planet_setup = yes
						}
					}
				}
			}
		}
		if = {
			limit = { num_guaranteed_colonies >= 1 }
			capital_scope = {
				solar_system = {
					closest_system = {
						limit = { has_star_flag = neighbor_t1_first_colony }
						random_system_planet = {
							limit = { has_planet_flag = prescripted_ideal }
							save_event_target_as = lrsk_fed_planet_1
							federation_origin_planet_setup = yes
						}
					}
					closest_system = {
						limit = { 
							NOT = { has_star_flag = neighbor_t1_first_colony }
							has_owner = no
							any_system_planet = {
								is_ringworld = no
								is_asteroid = no
								is_star = no
								is_moon = no
							}
						}
						if = {
							limit = {
								any_system_planet = { habitable_planet = yes }
							}
							random_system_planet = {
								limit = { habitable_planet = yes }
								save_event_target_as = lrsk_fed_planet_2
								set_planet_size = 16
							}
						}
						else = {
							random_system_planet = {
								limit = {
									is_ringworld = no
									is_asteroid = no
									is_star = no
									is_moon = no
								}
								save_event_target_as = lrsk_fed_planet_2
								federation_origin_planet_setup = yes
							}
						}
					}
				}
			}
		}
		if = {
			limit = { num_guaranteed_colonies = 0 }
			capital_scope = {
				solar_system = {
					closest_system = {
						limit = { has_owner = no }
						set_star_flag = lrsk_fed_origin_system_1
						if = {
							limit = {
								any_system_planet = { habitable_planet = yes }
							}
							random_system_planet = {
								limit = { habitable_planet = yes }
								save_event_target_as = lrsk_fed_planet_1
								set_planet_size = 16
							}
						}
						else = {
							random_system_planet = {
								limit = {
									is_ringworld = no
									is_asteroid = no
									is_star = no
									is_moon = no
								}
								save_event_target_as = lrsk_fed_planet_1
								federation_origin_planet_setup = yes
							}
						}
					}
					closest_system = {
						limit = { 
							NOT = { has_star_flag = lrsk_fed_origin_system_1 }
							has_owner = no
							any_system_planet = {
								is_ringworld = no
								is_asteroid = no
								is_star = no
								is_moon = no
							}
						}
						if = {
							limit = {
								any_system_planet = { habitable_planet = yes }
							}
							random_system_planet = {
								limit = { habitable_planet = yes }
								save_event_target_as = lrsk_fed_planet_2
								set_planet_size = 16
							}
						}
						else = {
							random_system_planet = {
								limit = {
									is_ringworld = no
									is_asteroid = no
									is_star = no
									is_moon = no
								}
								save_event_target_as = lrsk_fed_planet_2
								federation_origin_planet_setup = yes
							}
						}
					}
				}
			}
		}



		# First Member
		event_target:lrsk_fed_planet_1 = {
			solar_system = { generate_home_system_resources = yes }
			create_species = {
				name = random
				class = random_non_machine
				portrait = random
				traits = random
				homeworld = this
				effect = {
					save_event_target_as = lrsk_next_fed_planet_species
				}
			}
			if = {
				limit = { root = { or = { 
					has_origin = lrsk_gov_var_origin_for_discovery
					has_origin = lrsk_gov_var_origin_for_discovery_mi
				} } }
				#lrsk_create_for_discovery_member_1 = yes
				this = { planet_event = { id = lrsk_gov_var_new_fed_starts.2 } } # research fed
			}
			if = {
				limit = { root = { or = { 
					has_origin = lrsk_gov_var_origin_tradeways
					has_origin = lrsk_gov_var_origin_tradeways_mc
				} } }
				#lrsk_create_tradeways_member_1 = yes
				this = { planet_event = { id = lrsk_gov_var_new_fed_starts.3 } } # trade fed
			}
			if = {
				limit = { root = { has_origin = lrsk_gov_var_origin_grand_alliance } }
				#lrsk_create_grand_alliance_member_1 = yes
				this = { planet_event = { id = lrsk_gov_var_new_fed_starts.4 } } # military fed
			}
			event_target:lrsk_next_fed_member = {
				save_event_target_as = lrsk_fed_member_1
			}
			create_colony = {
				owner = event_target:lrsk_fed_member_1
			}
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
			generate_start_pops = yes
			solar_system = {
				create_starbase = {
					size = starbase_starport
					module = shipyard
					building = crew_quarters
					owner = event_target:lrsk_fed_member_1
					effect = {
						set_starbase_module = {
							slot = 1
							module = trading_hub
						}
					}
				}
			}
		}

		# Second Member
		event_target:lrsk_fed_planet_2 = {
			solar_system = { generate_home_system_resources = yes }
			create_species = {
				name = random
				class = random_non_machine
				portrait = random
				traits = random
				homeworld = this
				effect = {
					save_event_target_as = lrsk_next_fed_planet_species
				}
			}
			if = {
				limit = { root = { or = { 
					has_origin = lrsk_gov_var_origin_for_discovery
					has_origin = lrsk_gov_var_origin_for_discovery_mi
				} } }
				#lrsk_create_for_discovery_member_2 = yes
				this = { planet_event = { id = lrsk_gov_var_new_fed_starts.2 } } # research fed
			}
			if = {
				limit = { root = { or = { 
					has_origin = lrsk_gov_var_origin_tradeways
					has_origin = lrsk_gov_var_origin_tradeways_mc
				} } }
				#lrsk_create_tradeways_member_2 = yes
				this = { planet_event = { id = lrsk_gov_var_new_fed_starts.3 } } # trade fed
			}
			if = {
				limit = { root = { has_origin = lrsk_gov_var_origin_grand_alliance } }
				#lrsk_create_grand_alliance_member_2 = yes
				this = { planet_event = { id = lrsk_gov_var_new_fed_starts.4 } } # military fed
			}
			event_target:lrsk_next_fed_member = {
				save_event_target_as = lrsk_fed_member_2
			}
			create_colony = {
				owner = event_target:lrsk_fed_member_2
			}
			generate_start_deposits_and_blockers = yes
			generate_start_buildings_and_districts = yes
			generate_start_pops = yes
			solar_system = {
				create_starbase = {
					size = starbase_starport
					module = shipyard
					building = crew_quarters
					owner = event_target:lrsk_fed_member_2
					effect = {
						set_starbase_module = {
							slot = 1
							module = trading_hub
						}
					}
				}
			}
		}
		event_target:lrsk_fed_member_1 = {
			create_starting_leaders = yes
			country_event = { id = game_start.9 }
			country_event = { id = game_start.33 days = 1 } # needs delay for system ownership to settle
			join_alliance = { who = root override_requirements = yes }
			set_name = random # Fixes some naming issues
		}
		event_target:lrsk_fed_member_2 = {
			create_starting_leaders = yes
			country_event = { id = game_start.9 }
			country_event = { id = game_start.33 days = 1 } # needs delay for system ownership to settle
			join_alliance = { who = root override_requirements = yes }
			set_name = random # Fixes some naming issues
		}
		if = {
			limit = { or = { 
				has_origin = lrsk_gov_var_origin_for_discovery
				has_origin = lrsk_gov_var_origin_for_discovery_mi
			} }
			federation = { 
				set_federation_type = research_federation
				set_name = random
			}
		}
		if = {
			limit = { or = { 
				has_origin = lrsk_gov_var_origin_tradeways
				has_origin = lrsk_gov_var_origin_tradeways_mc
			} }
			federation = { 
				set_federation_type = trade_federation
				set_name = random
			}
		}
		if = {
			limit = { root = { has_origin = lrsk_gov_var_origin_grand_alliance } }
			federation = { 
				set_federation_type = military_federation
				set_name = random
			}
		}
		set_federation_leader = root
	}
}

# Creates research fed members
planet_event = {
	id = lrsk_gov_var_new_fed_starts.2
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		random_list = {
			20 = {
				create_species = {
					name = random
					class = MACHINE # MIs allowed in RCs
					portrait = random
					traits = random
					homeworld = this
					effect = {
						save_event_target_as = lrsk_next_fed_planet_species
					}
				}
				#Need to use this semi-random selection to exclude some of the less savory options...
				random_list = {
					10 = {
						create_country = {
							name_list = random
							species = event_target:lrsk_next_fed_planet_species
							type = default
							origin = "lrsk_gov_var_origin_for_discovery_npc"
							ignore_initial_colony_error = yes
							day_zero_contact = no
							ethos = {
								ethic = ethic_gestalt_consciousness
							}
							authority = auth_machine_intelligence
							civics = {
								civic = civic_machine_introspective
								civic = lrsk_gov_var_civic_machine_combat_data
							}
							effect = {
								save_event_target_as = lrsk_next_fed_member
								establish_communications_no_message = root
							}
						}
					}
					10 = {
						create_country = {
							name_list = random
							species = event_target:lrsk_next_fed_planet_species
							type = default
							origin = "lrsk_gov_var_origin_for_discovery_npc"
							ignore_initial_colony_error = yes
							day_zero_contact = no
							ethos = {
								ethic = ethic_gestalt_consciousness
							}
							authority = auth_machine_intelligence
							civics = {
								civic = civic_machine_introspective
								civic = lrsk_gov_var_civic_machine_diplomatic_protocols
							}
							effect = {
								save_event_target_as = lrsk_next_fed_member
								establish_communications_no_message = root
							}
						}
					}
					10 = {
						create_country = {
							name_list = random
							species = event_target:lrsk_next_fed_planet_species
							type = default
							origin = "lrsk_gov_var_origin_for_discovery_npc"
							ignore_initial_colony_error = yes
							day_zero_contact = no
							ethos = {
								ethic = ethic_gestalt_consciousness
							}
							authority = auth_machine_intelligence
							civics = {
								civic = civic_machine_introspective
								civic = civic_machine_delegated_functions
							}
							effect = {
								save_event_target_as = lrsk_next_fed_member
								establish_communications_no_message = root
							}
						}
					}
					10 = {
						create_country = {
							name_list = random
							species = event_target:lrsk_next_fed_planet_species
							type = default
							origin = "lrsk_gov_var_origin_for_discovery_npc"
							ignore_initial_colony_error = yes
							day_zero_contact = no
							ethos = {
								ethic = ethic_gestalt_consciousness
							}
							authority = auth_machine_intelligence
							civics = {
								civic = civic_machine_predictive_analysis
								civic = lrsk_gov_var_civic_machine_combat_data
							}
							effect = {
								save_event_target_as = lrsk_next_fed_member
								establish_communications_no_message = root
							}
						}
					}
					10 = {
						create_country = {
							name_list = random
							species = event_target:lrsk_next_fed_planet_species
							type = default
							origin = "lrsk_gov_var_origin_for_discovery_npc"
							ignore_initial_colony_error = yes
							day_zero_contact = no
							ethos = {
								ethic = ethic_gestalt_consciousness
							}
							authority = auth_machine_intelligence
							civics = {
								civic = civic_machine_predictive_analysis
								civic = lrsk_gov_var_civic_machine_diplomatic_protocols
							}
							effect = {
								save_event_target_as = lrsk_next_fed_member
								establish_communications_no_message = root
							}
						}
					}
					10 = {
						create_country = {
							name_list = random
							species = event_target:lrsk_next_fed_planet_species
							type = default
							origin = "lrsk_gov_var_origin_for_discovery_npc"
							ignore_initial_colony_error = yes
							day_zero_contact = no
							ethos = {
								ethic = ethic_gestalt_consciousness
							}
							authority = auth_machine_intelligence
							civics = {
								civic = civic_machine_predictive_analysis
								civic = civic_machine_delegated_functions
							}
							effect = {
								save_event_target_as = lrsk_next_fed_member
								establish_communications_no_message = root
							}
						}
					}
					10 = {
						create_country = {
							name_list = random
							species = event_target:lrsk_next_fed_planet_species
							type = default
							origin = "lrsk_gov_var_origin_for_discovery_npc"
							ignore_initial_colony_error = yes
							day_zero_contact = no
							ethos = {
								ethic = ethic_gestalt_consciousness
							}
							authority = auth_machine_intelligence
							civics = {
								civic = civic_machine_introspective
								civic = civic_machine_predictive_analysis
							}
							effect = {
								save_event_target_as = lrsk_next_fed_member
								establish_communications_no_message = root
							}
						}
					}
					10 = {
						create_country = {
							name_list = random
							species = event_target:lrsk_next_fed_planet_species
							type = default
							origin = "lrsk_gov_var_origin_for_discovery_npc"
							ignore_initial_colony_error = yes
							day_zero_contact = no
							ethos = {
								ethic = ethic_gestalt_consciousness
							}
							authority = auth_machine_intelligence
							civics = {
								civic = civic_machine_predictive_analysis
								civic = lrsk_gov_var_civic_machine_astroprospecting_mainframe
							}
							effect = {
								save_event_target_as = lrsk_next_fed_member
								establish_communications_no_message = root
							}
						}
					}
					10 = {
						create_country = {
							name_list = random
							species = event_target:lrsk_next_fed_planet_species
							type = default
							origin = "lrsk_gov_var_origin_for_discovery_npc"
							ignore_initial_colony_error = yes
							day_zero_contact = no
							ethos = {
								ethic = ethic_gestalt_consciousness
							}
							authority = auth_machine_intelligence
							civics = {
								civic = civic_machine_predictive_analysis
								civic = lrsk_gov_var_civic_machine_astroexploration_mainframe
							}
							effect = {
								save_event_target_as = lrsk_next_fed_member
								establish_communications_no_message = root
							}
						}
					}
					10 = {
						create_country = {
							name_list = random
							species = event_target:lrsk_next_fed_planet_species
							type = default
							origin = "lrsk_gov_var_origin_for_discovery_npc"
							ignore_initial_colony_error = yes
							day_zero_contact = no
							ethos = {
								ethic = ethic_gestalt_consciousness
							}
							authority = auth_machine_intelligence
							civics = {
								civic = civic_machine_servitor
							}
							effect = {
								save_event_target_as = lrsk_next_fed_member
								establish_communications_no_message = root
							}
						}
					}
				}
			}
			80 = {
				create_country = {
					name_list = random
					species = event_target:lrsk_next_fed_planet_species
					type = default
					origin = "lrsk_gov_var_origin_for_discovery_npc"
					ignore_initial_colony_error = yes
					day_zero_contact = no
					randomize_ethos = yes
					ethos = {
						ethic = "ethic_xenophile"
						ethic = "ethic_materialist"
						ethic = "ethic_fanatic_materialist"
					}
					effect = {
						save_event_target_as = lrsk_next_fed_member
						establish_communications_no_message = root
					}
				}
			}
		}
	}
}

# Creates trade fed members
planet_event = {
	id = lrsk_gov_var_new_fed_starts.3
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		random_list = {
			8 = {
				create_country = {
					name_list = random
					species = event_target:lrsk_next_fed_planet_species
					type = default
					origin = "lrsk_gov_var_origin_tradeways_npc"
					ignore_initial_colony_error = yes
					day_zero_contact = no
					randomize_ethos = yes
					ethos = {
						ethic = "ethic_xenophile"
						ethic = "ethic_spiritualist"
						ethic = "ethic_fanatic_spiritualist"
					}
					civics = {
						civic = civic_merchant_guilds
					}
					effect = {
						save_event_target_as = lrsk_next_fed_member
						establish_communications_no_message = root
					}
				}
			}
			8 = {
				create_country = {
					name_list = random
					species = event_target:lrsk_next_fed_planet_species
					type = default
					origin = "lrsk_gov_var_origin_tradeways_npc"
					ignore_initial_colony_error = yes
					day_zero_contact = no
					randomize_ethos = yes
					ethos = {
						ethic = "ethic_xenophile"
						ethic = "ethic_materialist"
						ethic = "ethic_fanatic_materialist"
					}
					civics = {
						civic = civic_merchant_guilds
					}
					effect = {
						save_event_target_as = lrsk_next_fed_member
						establish_communications_no_message = root
					}
				}
			}
			8 = {
				create_country = {
					name_list = random
					species = event_target:lrsk_next_fed_planet_species
					type = default
					origin = "lrsk_gov_var_origin_tradeways_npc"
					ignore_initial_colony_error = yes
					day_zero_contact = no
					randomize_ethos = yes
					ethos = {
						ethic = "ethic_xenophile"
						ethic = "ethic_pacifist"
						ethic = "ethic_fanatic_pacifist"
					}
					civics = {
						civic = civic_merchant_guilds
					}
					effect = {
						save_event_target_as = lrsk_next_fed_member
						establish_communications_no_message = root
					}
				}
			}
			8 = {
				create_country = {
					name_list = random
					species = event_target:lrsk_next_fed_planet_species
					type = default
					origin = "lrsk_gov_var_origin_tradeways_npc"
					ignore_initial_colony_error = yes
					day_zero_contact = no
					randomize_ethos = yes
					ethos = {
						ethic = "ethic_xenophile"
						ethic = "ethic_fanatic_xenophile"
						ethic = "ethic_egalitarian"
					}
					civics = {
						civic = civic_merchant_guilds
					}
					effect = {
						save_event_target_as = lrsk_next_fed_member
						establish_communications_no_message = root
					}
				}
			}
			8 = {
				create_country = {
					name_list = random
					species = event_target:lrsk_next_fed_planet_species
					type = default
					origin = "lrsk_gov_var_origin_tradeways_npc"
					ignore_initial_colony_error = yes
					day_zero_contact = no
					randomize_ethos = yes
					ethos = {
						ethic = "ethic_xenophile"
						ethic = "ethic_fanatic_xenophile"
						ethic = "ethic_authoritarian"
					}
					civics = {
						civic = civic_merchant_guilds
					}
					effect = {
						save_event_target_as = lrsk_next_fed_member
						establish_communications_no_message = root
					}
				}
			}
			10 = {
				create_country = {
					name_list = random
					species = event_target:lrsk_next_fed_planet_species
					type = default
					origin = "lrsk_gov_var_origin_tradeways_npc"
					ignore_initial_colony_error = yes
					day_zero_contact = no
					authority = auth_corporate
					randomize_ethos = yes
					ethos = {
						ethic = "ethic_xenophile"
						ethic = "ethic_fanatic_xenophile"
						ethic = "ethic_authoritarian"
					}
					effect = {
						save_event_target_as = lrsk_next_fed_member
						establish_communications_no_message = root
					}
				}
			}
			10 = {
				create_country = {
					name_list = random
					species = event_target:lrsk_next_fed_planet_species
					type = default
					origin = "lrsk_gov_var_origin_tradeways_npc"
					ignore_initial_colony_error = yes
					day_zero_contact = no
					authority = auth_corporate
					randomize_ethos = yes
					ethos = {
						ethic = "ethic_xenophile"
						ethic = "ethic_fanatic_xenophile"
						ethic = "ethic_egalitarian"
					}
					effect = {
						save_event_target_as = lrsk_next_fed_member
						establish_communications_no_message = root
					}
				}
			}
			10 = {
				create_country = {
					name_list = random
					species = event_target:lrsk_next_fed_planet_species
					type = default
					origin = "lrsk_gov_var_origin_tradeways_npc"
					ignore_initial_colony_error = yes
					day_zero_contact = no
					authority = auth_corporate
					randomize_ethos = yes
					ethos = {
						ethic = "ethic_xenophile"
						ethic = "ethic_militarist"
						ethic = "ethic_fanatic_militarist"
					}
					effect = {
						save_event_target_as = lrsk_next_fed_member
						establish_communications_no_message = root
					}
				}
			}
			10 = {
				create_country = {
					name_list = random
					species = event_target:lrsk_next_fed_planet_species
					type = default
					origin = "lrsk_gov_var_origin_tradeways_npc"
					ignore_initial_colony_error = yes
					day_zero_contact = no
					authority = auth_corporate
					randomize_ethos = yes
					ethos = {
						ethic = "ethic_xenophile"
						ethic = "ethic_pacifist"
						ethic = "ethic_fanatic_pacifist"
					}
					effect = {
						save_event_target_as = lrsk_next_fed_member
						establish_communications_no_message = root
					}
				}
			}
			10 = {
				create_country = {
					name_list = random
					species = event_target:lrsk_next_fed_planet_species
					type = default
					origin = "lrsk_gov_var_origin_tradeways_npc"
					ignore_initial_colony_error = yes
					day_zero_contact = no
					authority = auth_corporate
					randomize_ethos = yes
					ethos = {
						ethic = "ethic_xenophile"
						ethic = "ethic_materialist"
						ethic = "ethic_fanatic_materialist"
					}
					effect = {
						save_event_target_as = lrsk_next_fed_member
						establish_communications_no_message = root
					}
				}
			}
			10 = {
				create_country = {
					name_list = random
					species = event_target:lrsk_next_fed_planet_species
					type = default
					origin = "lrsk_gov_var_origin_tradeways_npc"
					ignore_initial_colony_error = yes
					day_zero_contact = no
					authority = auth_corporate
					randomize_ethos = yes
					ethos = {
						ethic = "ethic_xenophile"
						ethic = "ethic_spiritualist"
						ethic = "ethic_fanatic_spiritualist"
					}
					effect = {
						save_event_target_as = lrsk_next_fed_member
						establish_communications_no_message = root
					}
				}
			}
		}
	}
}

# Creates military fed members
planet_event = {
	id = lrsk_gov_var_new_fed_starts.4
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		create_country = {
			name_list = random
			species = event_target:lrsk_next_fed_planet_species
			type = default
			origin = "lrsk_gov_var_origin_grand_alliance_npc"
			ignore_initial_colony_error = yes
			day_zero_contact = no
			randomize_ethos = yes
			ethos = {
				ethic = "ethic_xenophile"
				ethic = "ethic_militarist"
				ethic = "ethic_fanatic_militarist"
			}
			effect = {
				save_event_target_as = lrsk_next_fed_member
				establish_communications_no_message = root
			}
		}
	}
}