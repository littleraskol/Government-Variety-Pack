# Government Variety Pack
# Events - Direct Revelation
# Author: littleraskol

#Gate Event
country_event = {
	id = lrsk_gov_var_direct_revelation.1
	title = lrsk_gov_var_direct_revelation.1.name
	desc = lrsk_gov_var_direct_revelation.1.desc

  #hide_window = yes

	trigger = {
		has_valid_civic = lrsk_gov_var_civic_direct_revelation
    any_owned_pop = { has_ethic = "ethic_spiritualist" }
		NOR = {
      has_country_flag = lrsk_gov_var_wild_cult_forming
      has_country_flag = lrsk_gov_var_wild_cult_formed_recently
    }
	}

	mean_time_to_happen = { months = 12 }

	immediate = {
  	random_list = {
  		80 = {  }
  		20 = {
        modifier = {
          factor = 0
          NOT = { any_owned_planet = { AND = {
            num_pops > 2
            any_pop = { has_ethic = "ethic_spiritualist" }
						OR = {
							NOT = { has_modifier = lrsk_gov_var_statmod_divine_right_cult }
							NOT = { has_modifier = lrsk_gov_var_statmod_children_of_heaven_cult }
							NOT = { has_modifier = lrsk_gov_var_statmod_holy_war_cult }
							NOT = { has_modifier = lrsk_gov_var_statmod_harmony_cult }
							NOT = { has_modifier = lrsk_gov_var_statmod_chosen_few_cult }
							NOT = { has_modifier = lrsk_gov_var_statmod_universal_family_cult }
							NOT = { has_modifier = lrsk_gov_var_statmod_doomsday_cult }
							NOT = { has_modifier = lrsk_gov_var_statmod_golden_age_cult }
						}
          } } }
        }
        modifier = {
          factor = 1.5
          num_owned_planets > 2
          num_owned_planets < 5
        }
        modifier = {
          factor = 2
          num_owned_planets > 4
          num_owned_planets < 8
        }
        modifier = {
          factor = 3
          num_owned_planets > 7
          num_owned_planets < 11
        }
        modifier = {
          factor = 4
          num_owned_planets > 10
        }
    		set_country_flag = lrsk_gov_var_wild_cult_forming
        random_owned_planet = {
          limit = {
            num_pops > 2
            any_pop = { has_ethic = "ethic_spiritualist" }
						OR = {
							NOT = { has_modifier = lrsk_gov_var_statmod_divine_right_cult }
							NOT = { has_modifier = lrsk_gov_var_statmod_children_of_heaven_cult }
							NOT = { has_modifier = lrsk_gov_var_statmod_holy_war_cult }
							NOT = { has_modifier = lrsk_gov_var_statmod_harmony_cult }
							NOT = { has_modifier = lrsk_gov_var_statmod_chosen_few_cult }
							NOT = { has_modifier = lrsk_gov_var_statmod_universal_family_cult }
							NOT = { has_modifier = lrsk_gov_var_statmod_doomsday_cult }
							NOT = { has_modifier = lrsk_gov_var_statmod_golden_age_cult }
						}
          }
          planet_event = { id = lrsk_gov_var_direct_revelation.2 }
        }
      }
  	}
	}

	option = {
		name = OK
	}
}

#Forming on planet
planet_event = {
	id = lrsk_gov_var_direct_revelation.2
	title = lrsk_gov_var_direct_revelation.2.name
	desc = lrsk_gov_var_direct_revelation.2.desc

  #hide_window = yes
  is_triggered_only = yes

  #This should already have been checked by calling event?
	#trigger = {
  #  this = { any_pop = {
  #      has_ethic = "ethic_spiritualist"
  #  } }
	#}

	immediate = {
    from = {
  		remove_country_flag = lrsk_gov_var_wild_cult_forming
  		set_timed_country_flag = {
  			flag = lrsk_gov_var_wild_cult_formed_recently
  			months = 24
  		}
    }

    random_list = {
      15 = {
        modifier = {
          factor = 0
					has_modifier = lrsk_gov_var_statmod_divine_right_cult
				}
        planet_event = { id = lrsk_gov_var_direct_revelation.3 }
      }
      15 = {
        modifier = {
          factor = 0
					has_modifier = lrsk_gov_var_statmod_children_of_heaven_cult
				}
        planet_event = { id = lrsk_gov_var_direct_revelation.4 }
      }
      15 = {
        modifier = {
          factor = 0
					has_modifier = lrsk_gov_var_statmod_holy_war_cult
				}
        planet_event = { id = lrsk_gov_var_direct_revelation.5 }
      }
      15 = {
        modifier = {
          factor = 0
					has_modifier = lrsk_gov_var_statmod_harmony_cult
				}
        planet_event = { id = lrsk_gov_var_direct_revelation.6 }
      }
      15 = {
        modifier = {
          factor = 0
					has_modifier = lrsk_gov_var_statmod_chosen_few_cult
				}
        planet_event = { id = lrsk_gov_var_direct_revelation.7 }
      }
      15 = {
        modifier = {
          factor = 0
					has_modifier = lrsk_gov_var_statmod_universal_family_cult
				}
        planet_event = { id = lrsk_gov_var_direct_revelation.8 }
      }
      5 = {
        modifier = {
          factor = 0
					has_modifier = lrsk_gov_var_statmod_doomsday_cult
				}
        planet_event = { id = lrsk_gov_var_direct_revelation.9 }
      }
      5 = {
        modifier = {
          factor = 0
					has_modifier = lrsk_gov_var_statmod_golden_age_cult
				}
        planet_event = { id = lrsk_gov_var_direct_revelation.10 }
      }
    }
	}

	option = {
		name = OK
	}
}

#Divine Right Cult
planet_event = {
	id = lrsk_gov_var_direct_revelation.3
	title = lrsk_gov_var_direct_revelation.3.name
	desc = lrsk_gov_var_direct_revelation.3.desc

  is_triggered_only = yes

	immediate = {
    add_modifier = {
      modifier = "lrsk_gov_var_statmod_divine_right_cult"
      days = 1800
    }
  }

  #Call event to see if the cult fizzles or has a revival. (Not sure how to make this work yet...)
  #hidden_effect = { planet_event = { id = lrsk_gov_var_direct_revelation.20 } }

	option = {
		name = INTRIGUING
	}
}

#Children of Heaven Cult
planet_event = {
	id = lrsk_gov_var_direct_revelation.4
	title = lrsk_gov_var_direct_revelation.4.name
	desc = lrsk_gov_var_direct_revelation.4.desc

  is_triggered_only = yes

	immediate = {
    add_modifier = {
      modifier = "lrsk_gov_var_statmod_children_of_heaven_cult"
      days = 1800
    }
  }

  #Call event to see if the cult fizzles or has a revival. (Not sure how to make this work yet...)
  #hidden_effect = { planet_event = { id = lrsk_gov_var_direct_revelation.20 } }

	option = {
		name = INTRIGUING
	}
}

#Holy War Cult
planet_event = {
	id = lrsk_gov_var_direct_revelation.5
	title = lrsk_gov_var_direct_revelation.5.name
	desc = lrsk_gov_var_direct_revelation.5.desc

  is_triggered_only = yes

	immediate = {
    add_modifier = {
      modifier = "lrsk_gov_var_statmod_holy_war_cult"
      days = 1800
    }
  }

  #Call event to see if the cult fizzles or has a revival. (Not sure how to make this work yet...)
  #hidden_effect = { planet_event = { id = lrsk_gov_var_direct_revelation.20 } }

	option = {
		name = INTRIGUING
	}
}

#Harmony Cult
planet_event = {
	id = lrsk_gov_var_direct_revelation.6
	title = lrsk_gov_var_direct_revelation.6.name
	desc = lrsk_gov_var_direct_revelation.6.desc

  is_triggered_only = yes

	immediate = {
    add_modifier = {
      modifier = "lrsk_gov_var_statmod_harmony_cult"
      days = 1800
    }
  }

  #Call event to see if the cult fizzles or has a revival. (Not sure how to make this work yet...)
  #hidden_effect = { planet_event = { id = lrsk_gov_var_direct_revelation.20 } }

	option = {
		name = INTRIGUING
	}
}

#Chosen Few Cult
planet_event = {
	id = lrsk_gov_var_direct_revelation.7
	title = lrsk_gov_var_direct_revelation.7.name
	desc = lrsk_gov_var_direct_revelation.7.desc

  is_triggered_only = yes

	immediate = {
    add_modifier = {
      modifier = "lrsk_gov_var_statmod_chosen_few_cult"
      days = 1800
    }
  }

  #Call event to see if the cult fizzles or has a revival. (Not sure how to make this work yet...)
  #hidden_effect = { planet_event = { id = lrsk_gov_var_direct_revelation.20 } }

	option = {
		name = INTRIGUING
	}
}

#Universal Family Cult
planet_event = {
	id = lrsk_gov_var_direct_revelation.8
	title = lrsk_gov_var_direct_revelation.8.name
	desc = lrsk_gov_var_direct_revelation.8.desc

  is_triggered_only = yes

	immediate = {
    add_modifier = {
      modifier = "lrsk_gov_var_statmod_universal_family_cult"
      days = 1800
    }
  }

  #Call event to see if the cult fizzles or has a revival. (Not sure how to make this work yet...)
  #hidden_effect = { planet_event = { id = lrsk_gov_var_direct_revelation.20 } }

	option = {
		name = INTRIGUING
	}
}

#Doomsday Cult
planet_event = {
	id = lrsk_gov_var_direct_revelation.9
	title = lrsk_gov_var_direct_revelation.9.name
	desc = lrsk_gov_var_direct_revelation.9.desc

  is_triggered_only = yes

	immediate = {
    add_modifier = {
      modifier = "lrsk_gov_var_statmod_doomsday_cult"
      days = 1800
    }
  }

  #Call event to see if the cult fizzles or has a revival. (Not sure how to make this work yet...)
  #hidden_effect = { planet_event = { id = lrsk_gov_var_direct_revelation.20 } }

	option = {
		name = DISCONCERTING
	}
}

#Golden Age Cult
planet_event = {
	id = lrsk_gov_var_direct_revelation.10
	title = lrsk_gov_var_direct_revelation.10.name
	desc = lrsk_gov_var_direct_revelation.10.desc

  is_triggered_only = yes

	immediate = {
    add_modifier = {
      modifier = "lrsk_gov_var_statmod_golden_age_cult"
      days = 1800
    }
  }

  #Call event to see if the cult fizzles or has a revival. (Not sure how to make this work yet...)
  #hidden_effect = { planet_event = { id = lrsk_gov_var_direct_revelation.20 } }

	option = {
		name = MARVELOUS
	}
}

#Revival or fizzle event
planet_event = {
	id = lrsk_gov_var_direct_revelation.20
	title = lrsk_gov_var_direct_revelation.20.name
	desc = lrsk_gov_var_direct_revelation.20.desc

  is_triggered_only = yes

  #hide_window = yes

  immediate = {
    random_list = {
      75 = { }
      20 = {
        #cult has revival in 1700 days, extending the modifier.
      }
      1 = {
        #cult fizzles in about 1 year
      }
      1 = {
        #cult fizzles in about 2 years
      }
      1 = {
        #cult fizzles in about 3 years
      }
      1 = {
        #cult fizzles in about 4 years
      }
      1 = {
        #cult fizzles in about 6 months
      }
    }
  }

	option = {
		name = OK
	}
}

#Fizzle event
planet_event = {
	id = lrsk_gov_var_direct_revelation.21
	title = lrsk_gov_var_direct_revelation.21.name
	desc = lrsk_gov_var_direct_revelation.21.desc

  is_triggered_only = yes

	option = {
		name = UNFORTUNATE
	}
}

#Revival event
planet_event = {
	id = lrsk_gov_var_direct_revelation.22
	title = lrsk_gov_var_direct_revelation.22.name
	desc = lrsk_gov_var_direct_revelation.22.desc

  is_triggered_only = yes

	option = {
		name = REMARKABLE
	}
}
