# Government Variety Pack
# Events - Backend
# Author: littleraskol

# These events are to test functionality

namespace = lrsk_gvp_testing

# Testing all new buildings in v1.6.8 - cycles through the relevant civics (non-criminal)
# Start with Tradeways, Inc Origin.
# Call event from console for each test, then manual save at that step.
# To test, set instant build on and then open a branch office and build the building to test.
# Then switch to the host empire and test the effects on that end.
# Then reload your last manual save.
event = {
	id = lrsk_gvp_testing.1
	hide_window = yes
	is_triggered_only = yes

	trigger = {        
		# This can be set in lrsk_government_variety_pack_backend.1 to turn off testing events
		NOT = { has_global_flag = lrsk_government_variety_pack_live_version }   
	}

	immediate = {
		# Testing start case is using the MC trade fed start.
		# This gets rid of other megacorps in the fed so that we don't have to worry about branch offices getting sniped from us...
		IF = { limit = { any_federation_ally = { NOT = { has_valid_civic = civic_merchant_guilds } } }
			every_federation_ally = { limit = { NOT = { has_valid_civic = civic_merchant_guilds } }
				change_government = {
					authority = auth_oligarchic
					civics = {
						civic = civic_merchant_guilds
						civic = random
					}
				}
			}
		}

		switch = {
			trigger = has_country_flag
			default = {
				# Start of test - Sci Mgmt

				shift_ethic = ethic_authoritarian # ensure validity
				change_government = {
					authority = auth_corporate
					civics = {
						civic = lrsk_gov_var_civic_mc_sci_mgnt
						civic = lrsk_gov_var_civic_mc_controlling_interest # anodyne option
					}
				}

				set_country_flag = lrsk_test_legit_step_2
			}
			lrsk_test_legit_step_2 = {
				# Edu Corp
				remove_country_flag = lrsk_test_legit_step_2

				shift_ethic = ethic_materialist # ensure validity
				change_government = {
					authority = auth_corporate
					civics = {
						civic = lrsk_gov_var_civic_mc_edu_corp
						civic = lrsk_gov_var_civic_mc_controlling_interest # anodyne option
					}
				}
				
				set_country_flag = lrsk_test_legit_step_3
			}
			lrsk_test_legit_step_3 = {
				# Co-op
				remove_country_flag = lrsk_test_legit_step_3

				shift_ethic = ethic_egalitarian # ensure validity
				change_government = {
					authority = auth_corporate
					civics = {
						civic = lrsk_gov_var_civic_mc_workers_councils
						civic = lrsk_gov_var_civic_mc_controlling_interest # anodyne option
					}
				}
				
				set_country_flag = lrsk_test_legit_step_4
			}
			lrsk_test_legit_step_4 = {
				# Gig Econ
				remove_country_flag = lrsk_test_legit_step_4

				shift_ethic = ethic_authoritarian # ensure validity
				change_government = {
					authority = auth_corporate
					civics = {
						civic = lrsk_gov_var_civic_mc_gig_economy
						civic = lrsk_gov_var_civic_mc_controlling_interest # anodyne option
					}
				}

				set_country_flag = lrsk_test_legit_step_5
			}
			lrsk_test_legit_step_5 = {
				# Naval alone
				remove_country_flag = lrsk_test_legit_step_5

				shift_ethic = ethic_militarist # ensure validity
				change_government = {
					authority = auth_corporate
					civics = {
						civic = civic_naval_contractors
						civic = lrsk_gov_var_civic_mc_controlling_interest # anodyne option
					}
				}

				set_country_flag = lrsk_test_legit_step_6
			}
			lrsk_test_legit_step_6 = {
				# Naval and PMC
				remove_country_flag = lrsk_test_legit_step_6

				change_government = {
					authority = auth_corporate
					civics = {
						civic = civic_naval_contractors
						civic = civic_private_military_companies
					}
				}

				set_country_flag = lrsk_test_legit_step_7
			}
			lrsk_test_legit_step_7 = {
				# PMC alone
				remove_country_flag = lrsk_test_legit_step_7

				change_government = {
					authority = auth_corporate
					civics = {
						civic = civic_private_military_companies
						civic = lrsk_gov_var_civic_mc_controlling_interest # anodyne option
					}
				}

				set_country_flag = lrsk_test_legit_step_8
			}
			lrsk_test_legit_step_8 = {
				# Prospect
				remove_country_flag = lrsk_test_legit_step_8

				change_government = {
					authority = auth_corporate
					civics = {
						civic = civic_private_prospectors
						civic = lrsk_gov_var_civic_mc_controlling_interest # anodyne option
					}
				}

				set_country_flag = lrsk_test_legit_step_9
			}
			lrsk_test_legit_step_9 = {
				# Media
				remove_country_flag = lrsk_test_legit_step_9

				change_government = {
					authority = auth_corporate
					civics = {
						civic = civic_media_conglomerate
						civic = lrsk_gov_var_civic_mc_controlling_interest # anodyne option
					}
				}

				set_country_flag = lrsk_test_legit_step_10
			}
			lrsk_test_legit_step_10 = {
				# Casino
				remove_country_flag = lrsk_test_legit_step_10

				shift_ethic = ethic_spiritualist # ensure validity
				change_government = {
					authority = auth_corporate
					civics = {
						civic = lrsk_gov_var_civic_mc_casino_mystic
						civic = lrsk_gov_var_civic_mc_controlling_interest # anodyne option
					}
				}

				set_country_flag = lrsk_test_legit_step_11
			}
			lrsk_test_legit_step_11 = {
				# Vacay
				remove_country_flag = lrsk_test_legit_step_11

				shift_ethic = ethic_xenophile # ensure validity
				change_government = {
					authority = auth_corporate
					civics = {
						civic = lrsk_gov_var_civic_mc_vacay_planning
						civic = lrsk_gov_var_civic_mc_controlling_interest # anodyne option
					}
				}

				set_country_flag = lrsk_test_legit_step_12
			}
			lrsk_test_legit_step_12 = {
				# Heritage
				remove_country_flag = lrsk_test_legit_step_12

				shift_ethic = ethic_xenophobe # ensure validity (will the cause issues for the origin though?)
				change_government = {
					authority = auth_corporate
					civics = {
						civic = lrsk_gov_var_civic_mc_heritage_trust
						civic = lrsk_gov_var_civic_mc_controlling_interest # anodyne option
					}
				}

				set_country_flag = lrsk_test_legit_step_13
			}
			lrsk_test_legit_step_13 = {
				# CRS
				remove_country_flag = lrsk_test_legit_step_13

				shift_ethic = ethic_xenophile # remove any xenophobe weirdness
				shift_ethic = ethic_pacifist # ensure validity
				change_government = {
					authority = auth_corporate
					civics = {
						civic = lrsk_gov_var_civic_mc_conflict_res
						civic = lrsk_gov_var_civic_mc_controlling_interest # anodyne option
					}
				}

				set_country_flag = lrsk_test_legit_step_14
			}
			lrsk_test_legit_step_14 = {
				# ISS
				remove_country_flag = lrsk_test_legit_step_14

				shift_ethic = ethic_authoritarian # ensure validity
				change_government = {
					authority = auth_corporate
					civics = {
						civic = lrsk_gov_var_civic_mc_police_state
						civic = lrsk_gov_var_civic_mc_controlling_interest # anodyne option
					}
				}

				set_country_flag = lrsk_test_legit_step_15
			}
			lrsk_test_legit_step_15 = {
				# Indent 
				remove_country_flag = lrsk_test_legit_step_15

				change_government = {
					authority = auth_corporate
					civics = {
						civic = civic_indentured_assets
						civic = lrsk_gov_var_civic_mc_controlling_interest # anodyne option
					}
				}
			}
		}
	}
}


# Testing all new buildings in v1.6.8 - cycles through the relevant civics (criminal)
# Start with Tradeways, Inc Origin.
# Call event from console for each test, then manual save at that step.
# To test, set instant build on and then open a branch office and build the building to test.
# Then switch to the host empire and test the effects on that end.
# Then reload your last manual save.
event = {
	id = lrsk_gvp_testing.2
	hide_window = yes
	is_triggered_only = yes

	trigger = {        
		# This can be set in lrsk_government_variety_pack_backend.1 to turn off testing events
		NOT = { has_global_flag = lrsk_government_variety_pack_live_version }   
	}

	immediate = {
		# Testing start case is using the MC trade fed start.
		# This gets rid of other megacorps in the fed so that we don't have to worry about branch offices getting sniped from us...
		IF = { limit = { any_federation_ally = { NOT = { has_valid_civic = civic_merchant_guilds } } }
			every_federation_ally = { limit = { NOT = { has_valid_civic = civic_merchant_guilds } }
				change_government = {
					authority = auth_oligarchic
					civics = {
						civic = civic_merchant_guilds
						civic = random
					}
				}
			}
		}

		switch = {
			trigger = has_country_flag
			default = {
				# Start of test - Sci Mgmt

				shift_ethic = ethic_authoritarian # ensure validity
				change_government = {
					authority = auth_corporate
					civics = {
						civic = lrsk_gov_var_civic_mc_sci_mgnt
						civic = civic_criminal_heritage
					}
				}

				set_country_flag = lrsk_test_crim_step_2
			}
			lrsk_test_crim_step_2 = {
				# Edu Corp
				remove_country_flag = lrsk_test_crim_step_2

				shift_ethic = ethic_materialist # ensure validity
				change_government = {
					authority = auth_corporate
					civics = {
						civic = lrsk_gov_var_civic_mc_edu_corp
						civic = civic_criminal_heritage
					}
				}
				
				set_country_flag = lrsk_test_crim_step_3
			}
			lrsk_test_crim_step_3 = {
				# Co-op
				remove_country_flag = lrsk_test_crim_step_3

				shift_ethic = ethic_egalitarian # ensure validity
				change_government = {
					authority = auth_corporate
					civics = {
						civic = lrsk_gov_var_civic_mc_workers_councils
						civic = civic_criminal_heritage
					}
				}
				
				set_country_flag = lrsk_test_crim_step_4
			}
			lrsk_test_crim_step_4 = {
				# Gig Econ
				remove_country_flag = lrsk_test_crim_step_4

				shift_ethic = ethic_authoritarian # ensure validity
				change_government = {
					authority = auth_corporate
					civics = {
						civic = lrsk_gov_var_civic_mc_gig_economy
						civic = civic_criminal_heritage
					}
				}

				set_country_flag = lrsk_test_crim_step_5
			}
			lrsk_test_crim_step_5 = {
				# Naval alone
				remove_country_flag = lrsk_test_crim_step_5

				shift_ethic = ethic_militarist # ensure validity
				change_government = {
					authority = auth_corporate
					civics = {
						civic = civic_naval_contractors
						civic = civic_criminal_heritage
					}
				}

				set_country_flag = lrsk_test_crim_step_6
			}
			lrsk_test_crim_step_6 = {
				# PMC alone
				remove_country_flag = lrsk_test_crim_step_6

				change_government = {
					authority = auth_corporate
					civics = {
						civic = civic_private_military_companies
						civic = civic_criminal_heritage
					}
				}

				set_country_flag = lrsk_test_crim_step_7
			}
			lrsk_test_crim_step_7 = {
				# Indent 
				remove_country_flag = lrsk_test_crim_step_7

				shift_ethic = ethic_authoritarian # ensure validity
				change_government = {
					authority = auth_corporate
					civics = {
						civic = civic_indentured_assets
						civic = civic_criminal_heritage
					}
				}

				set_country_flag = lrsk_test_crim_step_8
			}
			lrsk_test_crim_step_8 = {
				# Prospect
				remove_country_flag = lrsk_test_crim_step_8

				change_government = {
					authority = auth_corporate
					civics = {
						civic = civic_private_prospectors
						civic = civic_criminal_heritage
					}
				}

				set_country_flag = lrsk_test_crim_step_9
			}
			lrsk_test_crim_step_9 = {
				# Media
				remove_country_flag = lrsk_test_crim_step_9

				change_government = {
					authority = auth_corporate
					civics = {
						civic = civic_media_conglomerate
						civic = civic_criminal_heritage
					}
				}

				set_country_flag = lrsk_test_crim_step_10
			}
			lrsk_test_crim_step_10 = {
				# Casino
				remove_country_flag = lrsk_test_crim_step_10

				shift_ethic = ethic_spiritualist # ensure validity
				change_government = {
					authority = auth_corporate
					civics = {
						civic = lrsk_gov_var_civic_mc_casino_mystic
						civic = civic_criminal_heritage
					}
				}

				set_country_flag = lrsk_test_crim_step_11
			}
			lrsk_test_crim_step_11 = {
				# Vacay
				remove_country_flag = lrsk_test_crim_step_11

				shift_ethic = ethic_xenophile # ensure validity
				change_government = {
					authority = auth_corporate
					civics = {
						civic = lrsk_gov_var_civic_mc_vacay_planning
						civic = civic_criminal_heritage
					}
				}

				set_country_flag = lrsk_test_crim_step_12
			}
			lrsk_test_crim_step_12 = {
				# Heritage
				remove_country_flag = lrsk_test_crim_step_12

				shift_ethic = ethic_xenophobe # ensure validity (will the cause issues for the origin though?)
				change_government = {
					authority = auth_corporate
					civics = {
						civic = lrsk_gov_var_civic_mc_heritage_trust
						civic = civic_criminal_heritage
					}
				}

				set_country_flag = lrsk_test_crim_step_13
			}
			lrsk_test_crim_step_13 = {
				# CRS
				remove_country_flag = lrsk_test_crim_step_13

				shift_ethic = ethic_xenophile # remove any xenophobe weirdness
				shift_ethic = ethic_pacifist # ensure validity
				change_government = {
					authority = auth_corporate
					civics = {
						civic = lrsk_gov_var_civic_mc_conflict_res
						civic = civic_criminal_heritage
					}
				}

				set_country_flag = lrsk_test_crim_step_14
			}
			lrsk_test_crim_step_14 = {
				# ISS
				remove_country_flag = lrsk_test_crim_step_14

				shift_ethic = ethic_authoritarian # ensure validity
				change_government = {
					authority = auth_corporate
					civics = {
						civic = lrsk_gov_var_civic_mc_police_state
						civic = civic_criminal_heritage
					}
				}

				set_country_flag = lrsk_test_crim_step_15
			}
			lrsk_test_crim_step_15 = {
				# Naval and PMC
				remove_country_flag = lrsk_test_crim_step_15

				give_technology = { tech = tech_galactic_administration message = no } # allow 3 civics
				shift_ethic = ethic_militarist # ensure validity
				change_government = {
					authority = auth_corporate
					civics = {
						civic = civic_private_military_companies
						civic = civic_naval_contractors
						civic = civic_criminal_heritage
					}
				}
			}
		}
	}
}