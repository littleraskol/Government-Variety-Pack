# New Advanced Civics
# Policies
# Author: littleraskol

lrsk_adv_civ_rev_policy = {

	potential = {
		has_valid_civic = lrsk_adv_civ_civic_otherworldly
	}

	option = {
		name = "lrsk_adv_civ_rev_encourage"

		policy_flags = {
			lrsk_adv_civ_encourage_rev
		}

		valid = {
			OR = {
				has_policy_flag = lrsk_adv_civ_encourage_rev
				has_policy_flag = lrsk_adv_civ_rev_default
			}
		}

		modifier = {
			all_technology_research_speed = -0.05
			country_unity_produces_mult = 0.10
			ship_anomaly_generation_chance_mult = 0.1
		}

		AI_weight = {
			weight = 10
			modifier = {
				factor = 1.2
				has_ethic = "ethic_xenophile"
			}
			modifier = {
				factor = 1.3
				has_ethic = "ethic_egalitarian"
			}
			modifier = {
				factor = 0.9
				has_ethic = "ethic_xenophobe"
			}
			modifier = {
				factor = 0.8
				has_ethic = "ethic_authoritarian"
			}
		}
	}

	option = {
		name = "lrsk_adv_civ_rev_default"

		policy_flags = {
			lrsk_adv_civ_rev_default
		}

		valid = {
			OR = {
				has_policy_flag = lrsk_adv_civ_encourage_rev
				has_policy_flag = lrsk_adv_civ_rev_default
				has_policy_flag = lrsk_adv_civ_discourage_rev
			}
		}

		AI_weight = { weight = 11 }
	}

	option = {
		name = "lrsk_adv_civ_rev_discourage"

		policy_flags = {
			lrsk_adv_civ_discourage_rev
		}


		valid = {
			OR = {
				has_policy_flag = lrsk_adv_civ_rev_default
				has_policy_flag = lrsk_adv_civ_discourage_rev
			}
		}

		modifier = {
			all_technology_research_speed = 0.05
			country_unity_produces_mult = -0.10
			science_ship_survey_speed = 0.1
    		}

		AI_weight = {
			weight = 10
			modifier = {
				factor = 1.2
				has_ethic = "ethic_xenophobe"
			}
			modifier = {
				factor = 1.3
				has_ethic = "ethic_authoritarian"
			}
			modifier = {
				factor = 0.9
				has_ethic = "ethic_xenophile"
			}
			modifier = {
				factor = 0.8
				has_ethic = "ethic_egalitarian"
			}
		}
	}
}

lrsk_adv_civ_tech_ritual = {

	potential = {
		has_valid_civic = lrsk_adv_civ_civic_technobarbarism
	}

	option = {
		name = "lrsk_adv_civ_full_rev"

		policy_flags = {
			lrsk_adv_civ_full_rev
		}

		valid = {
			OR = {
				has_policy_flag = lrsk_adv_civ_full_rev
				has_policy_flag = lrsk_adv_civ_lapsed_rev
			}
			NOT = { has_country_flag = lrsk_adv_civ_reform_decision_taken }
		}

		modifier = {
			all_technology_research_speed = -0.2
		}

		AI_weight = {
			weight = 1
			modifier = {
				factor = 3
				years_passed < 20
			}
			modifier = {
				factor = 3
				years_passed > 19
				years_passed < 40
				OR = {
					has_ethic = "ethic_fanatic_authoritarian"
					has_ethic = "ethic_fanatic_spiritualist"
				}
			}
		}
	}

	option = {
		name = "lrsk_adv_civ_lapsed_rev"

		policy_flags = {
			lrsk_adv_civ_lapsed_rev
		}

		valid = {
			OR = {
				has_policy_flag = lrsk_adv_civ_full_rev
				has_policy_flag = lrsk_adv_civ_lapsed_rev
				has_policy_flag = lrsk_adv_civ_token_rev
			}
			OR = {
				years_passed > 20
				has_encountered_other_species = yes
			}
			NOT = { has_country_flag = lrsk_adv_civ_reform_decision_taken }
		}

		modifier = {
			ship_emergency_ftl_mult = 0.05
			ship_disengage_chance_mult = -0.05
			all_technology_research_speed = -0.1
		}

		AI_weight = {
			weight = 1
			modifier = {
				factor = 2
				years_passed > 40
			}
		}
	}

	option = {
		name = "lrsk_adv_civ_token_rev"

		policy_flags = {
			lrsk_adv_civ_token_rev
		}

		valid = {
			OR = {
				has_policy_flag = lrsk_adv_civ_lapsed_rev
				has_policy_flag = lrsk_adv_civ_token_rev
				has_policy_flag = lrsk_adv_civ_no_rev
			}
			years_passed > 40
			has_encountered_other_species = yes
			NOT = { has_country_flag = lrsk_adv_civ_reform_decision_taken }
		}

		modifier = {
			ship_emergency_ftl_mult = 0.1
			ship_disengage_chance_mult = -0.1
			ship_fire_rate_mult = -0.05
			ship_evasion_mult = -0.05
			# no research penalty (need custom tooltip)
		}

		AI_weight = {
			weight = 1
			modifier = {
				factor = 3
				years_passed > 60
				years_passed < 80
				
			}
			modifier = {
				factor = 4
				years_passed > 79
			}
			modifier = {
				factor = 0.5
				OR = {
					has_ethic = "ethic_fanatic_authoritarian"
					has_ethic = "ethic_fanatic_spiritualist"
				}
			}
		}
	}

	option = {
		name = "lrsk_adv_civ_no_rev"

		policy_flags = {
			lrsk_adv_civ_no_rev
		}

		valid = {
			OR = {
				has_policy_flag = lrsk_adv_civ_token_rev
				has_policy_flag = lrsk_adv_civ_no_rev
			}
			years_passed > 60
			has_encountered_other_species = yes
		}

		modifier = {
			ship_emergency_ftl_mult = 0.15
			ship_disengage_chance_mult = -0.15
			ship_fire_rate_mult = -0.1
			ship_evasion_mult = -0.1
			
			num_tech_alternatives_add = 1
		}

		AI_weight = {
			weight = 1
			modifier = {
				factor = 5
				years_passed > 80
			}
			modifier = {
				factor = 0
				OR = {
					has_ethic = "ethic_fanatic_authoritarian"
					has_ethic = "ethic_fanatic_spiritualist"
				}
			}
		}
  	}
}
