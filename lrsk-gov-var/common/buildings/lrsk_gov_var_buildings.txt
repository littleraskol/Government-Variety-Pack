# Government Variety Pack
# Buildings
# Author: littleraskol

## Army Buildings

# Hall of Honor

lrsk_gov_var_bldg_hall_of_honor = {
	base_buildtime = 240
	#add_to_first_building_slot = yes
	base_cap_amount = 2

	category = army

	potential = {
		owner = {  OR = {
      		has_valid_civic = lrsk_gov_var_civic_chivalry
      		has_valid_civic = lrsk_gov_var_civic_chivalry_aristo
		} }
	}

	allow = {
		has_upgraded_capital = yes
	}

	planet_modifier = {
		planet_housing_add = 1
		job_lrsk_gov_var_job_knight_add = 1
	}

	army_modifier = {
		army_starting_experience_add = 25
		army_morale = 0.1
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 300
		}
		upkeep = {
			energy = 1
		}
	}

	upgrades = {
		"lrsk_gov_var_bldg_hall_of_valor"
	}

	ai_weight = {
		weight = 0.75

		modifier = {
			factor = 5
			planet_crime > 4
			planet_crime < 15
		}

		modifier = {
			factor = 10
			planet_crime > 14
			planet_crime < 30
		}

		modifier = {
			factor = 20
			planet_crime > 29
			planet_crime < 50
		}

		modifier = {
			factor = 25
			planet_crime > 49
		}
	}
}

# Hall of Valor

lrsk_gov_var_bldg_hall_of_valor = {
	base_buildtime = 360
	can_build = no

	category = army

	allow = {
		has_major_upgraded_capital = yes
	}

	planet_modifier = {
		planet_housing_add = 2
		job_lrsk_gov_var_job_knight_add = 2
	}

	army_modifier = {
		army_starting_experience_add = 50
		army_morale = 0.2
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 600
		}
		upkeep = {
			energy = 2
		}
	}

	ai_weight = {
		weight = 0.75

		modifier = {
			factor = 5
			planet_crime > 4
			planet_crime < 15
		}

		modifier = {
			factor = 10
			planet_crime > 14
			planet_crime < 30
		}

		modifier = {
			factor = 20
			planet_crime > 29
			planet_crime < 50
		}

		modifier = {
			factor = 25
			planet_crime > 49
		}
	}
}

## Government Buildings

# Planetary Synaptic Stuff
@lrsk_gov_var_planet_synaptic_unity_cost_base = 1000
@lrsk_gov_var_planet_synaptic_unity_cost_upgrade = 200
@lrsk_gov_var_planet_synaptic_unity_cost_upkeep = 5

@lrsk_gov_var_planet_synaptic_crime_1 = 0.1
@lrsk_gov_var_planet_synaptic_crime_2 = 0.2
@lrsk_gov_var_planet_synaptic_crime_3 = 0.3
@lrsk_gov_var_planet_synaptic_crime_4 = 0.4
@lrsk_gov_var_planet_synaptic_crime_5 = 0.5

@lrsk_gov_var_planet_synaptic_amenities_1 = 0.05
@lrsk_gov_var_planet_synaptic_amenities_2 = 0.15
@lrsk_gov_var_planet_synaptic_amenities_3 = 0.2
@lrsk_gov_var_planet_synaptic_amenities_4 = 0.25
@lrsk_gov_var_planet_synaptic_amenities_5 = 0.3

@lrsk_gov_var_planet_synaptic_popsreq_1 = 15
@lrsk_gov_var_planet_synaptic_popsreq_2 = 20
@lrsk_gov_var_planet_synaptic_popsreq_3 = 25
@lrsk_gov_var_planet_synaptic_popsreq_4 = 30
@lrsk_gov_var_planet_synaptic_popsreq_5 = 35

# Planetary Synaptic Node
lrsk_gov_var_bldg_planet_synaptic_node = {
	base_buildtime = 360
	base_cap_amount = 1

	category = government

	potential = {
		exists = owner
		owner = {
			is_hive_empire = yes
	  		has_valid_civic = lrsk_gov_var_civic_hive_planetmind_creativity
		}
	}

	allow = {
		num_pops >= @lrsk_gov_var_planet_synaptic_popsreq_1
	}

	upgrades = {
		lrsk_gov_var_bldg_planet_synaptic_cluster
	}

	planet_modifier = {
		planet_amenities_no_happiness_mult = @lrsk_gov_var_planet_synaptic_amenities_1
		job_lrsk_gov_var_job_planetmind_overseer_add = 1
		job_maintenance_drone_add = 1
		planet_crime_no_happiness_mult = @lrsk_gov_var_planet_synaptic_crime_1
	}

	triggered_desc = {
		text = job_lrsk_gov_var_job_planetmind_overseer_effect_desc
	}

	triggered_desc = {
		text = job_maintenance_drone_effect_desc
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 400
			unity = @lrsk_gov_var_planet_synaptic_unity_cost_base
		}
		upkeep = {
			energy = 2
			unity = @lrsk_gov_var_planet_synaptic_unity_cost_upkeep
		}
	}

	ai_weight = {
		weight = 1
	}
}

# Planetary Synaptic Cluster
lrsk_gov_var_bldg_planet_synaptic_cluster = {
	base_buildtime = 450

	category = government
	can_build = no

	potential = {
		exists = owner
		owner = {
			is_hive_empire = yes
	  		has_valid_civic = lrsk_gov_var_civic_hive_planetmind_creativity
		}
	}

	allow = {
		num_pops >= @lrsk_gov_var_planet_synaptic_popsreq_2
	}

	upgrades = {
		lrsk_gov_var_bldg_planet_synaptic_confluence
	}

	planet_modifier = {
		planet_amenities_no_happiness_mult = @lrsk_gov_var_planet_synaptic_amenities_2
		job_lrsk_gov_var_job_planetmind_overseer_add = 2
		job_maintenance_drone_add = 1
		planet_crime_no_happiness_mult = @lrsk_gov_var_planet_synaptic_crime_2
	}

	triggered_desc = {
		text = job_lrsk_gov_var_job_planetmind_overseer_effect_desc
	}

	triggered_desc = {
		text = job_maintenance_drone_effect_desc
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 500
			unity = @lrsk_gov_var_planet_synaptic_unity_cost_upgrade
		}
		upkeep = {
			energy = 2
			unity = @lrsk_gov_var_planet_synaptic_unity_cost_upkeep
		}
	}

	ai_weight = {
		weight = 1
	}
}

# Planetary Synaptic Confluence
lrsk_gov_var_bldg_planet_synaptic_confluence = {
	base_buildtime = 540

	category = government
	can_build = no

	potential = {
		exists = owner
		owner = {
			is_hive_empire = yes
	  		has_valid_civic = lrsk_gov_var_civic_hive_planetmind_creativity
		}
	}

	allow = {
		num_pops >= @lrsk_gov_var_planet_synaptic_popsreq_3
	}

	upgrades = {
		lrsk_gov_var_bldg_planet_synaptic_core
	}

	planet_modifier = {
		planet_amenities_no_happiness_mult = @lrsk_gov_var_planet_synaptic_amenities_3
		job_lrsk_gov_var_job_planetmind_overseer_add = 3
		job_maintenance_drone_add = 1
		planet_crime_no_happiness_mult = @lrsk_gov_var_planet_synaptic_crime_3
	}

	triggered_desc = {
		text = job_lrsk_gov_var_job_planetmind_overseer_effect_desc
	}

	triggered_desc = {
		text = job_maintenance_drone_effect_desc
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 600
			unity = @lrsk_gov_var_planet_synaptic_unity_cost_upgrade
		}
		upkeep = {
			energy = 3
			unity = @lrsk_gov_var_planet_synaptic_unity_cost_upkeep
		}
	}

	ai_weight = {
		weight = 1
	}
}

# Planetary Synaptic Core
lrsk_gov_var_bldg_planet_synaptic_core = {
	base_buildtime = 630

	category = government
	can_build = no

	potential = {
		exists = owner
		owner = {
			is_hive_empire = yes
	  		has_valid_civic = lrsk_gov_var_civic_hive_planetmind_creativity
		}
	}

	allow = {
		num_pops >= @lrsk_gov_var_planet_synaptic_popsreq_4
	}

	upgrades = {
		lrsk_gov_var_bldg_planet_synaptic_nexus
	}

	planet_modifier = {
		planet_amenities_no_happiness_mult = @lrsk_gov_var_planet_synaptic_amenities_4
		job_lrsk_gov_var_job_planetmind_overseer_add = 4
		job_maintenance_drone_add = 1
		planet_crime_no_happiness_mult = @lrsk_gov_var_planet_synaptic_crime_4
	}

	triggered_desc = {
		text = job_lrsk_gov_var_job_planetmind_overseer_effect_desc
	}

	triggered_desc = {
		text = job_maintenance_drone_effect_desc
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 700
			unity = @lrsk_gov_var_planet_synaptic_unity_cost_upgrade
		}
		upkeep = {
			energy = 3
			unity = @lrsk_gov_var_planet_synaptic_unity_cost_upkeep
		}
	}

	ai_weight = {
		weight = 1
	}
}

# Planetary Synaptic Nexus
lrsk_gov_var_bldg_planet_synaptic_nexus = {
	base_buildtime = 800

	category = government
	can_build = no

	potential = {
		exists = owner
		owner = {
			is_hive_empire = yes
	  		has_valid_civic = lrsk_gov_var_civic_hive_planetmind_creativity
		}
	}

	allow = {
		num_pops >= @lrsk_gov_var_planet_synaptic_popsreq_5
	}

	planet_modifier = {
		planet_amenities_no_happiness_mult = @lrsk_gov_var_planet_synaptic_amenities_5
		job_lrsk_gov_var_job_planetmind_overseer_add = 5
		job_maintenance_drone_add = 1
		planet_crime_no_happiness_mult = @lrsk_gov_var_planet_synaptic_crime_5
	}

	triggered_desc = {
		text = job_lrsk_gov_var_job_planetmind_overseer_effect_desc
	}

	triggered_desc = {
		text = job_maintenance_drone_effect_desc
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 800
			unity = @lrsk_gov_var_planet_synaptic_unity_cost_upgrade
		}
		upkeep = {
			energy = 4
			unity = @lrsk_gov_var_planet_synaptic_unity_cost_upkeep
		}
	}

	ai_weight = {
		weight = 1
	}
}

## Research Buildings

# Techno-Ruin Research Center

lrsk_gov_var_bldg_tech_ruins = {
	base_buildtime = 360
	#add_to_first_building_slot = yes
	base_cap_amount = 1

	category = research

	potential = {
		owner = { has_origin = lrsk_adv_civ_origin_ancient_tech }
	}

	allow = {
		has_deposit = d_lrsk_gov_var_tech_ruins
	}

	planet_modifier = {
		job_lrsk_gov_var_job_cyber_salvager_add = 1
		job_lrsk_gov_var_job_cyber_salvager_per_pop = 0.025
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_valid_civic = lrsk_adv_civ_civic_technobarbarism }
		}
		modifier = {
			job_lrsk_gov_var_job_head_salvager_add = 1
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 500
		}
		upkeep = {
			energy = 2
		}
	}

	ai_weight = {
		weight = 0
		modifier = {
			weight = 75
			num_pops >= 15
			free_amenities > 2 #Prevents running out of amenities
			owner = {
				OR = {
					has_monthly_income = {
						resource = consumer_goods
						value > 0
					}
					country_uses_consumer_goods = no
				}
			} # so that we don't run out of consumer goods
		}
		modifier = {
			weight = 50
			free_amenities > 2 #Prevents running out of amenities
			owner = {
				OR = {
					has_monthly_income = {
						resource = consumer_goods
						value > 0
					}
					country_uses_consumer_goods = no
				}
			} # so that we don't run out of consumer goods
			OR = {
				num_pops >= 40
				owner = {
					any_neighbor_country = {
						is_country_type = default
						relative_power = {
							who = prev
							category = technology
							value > equivalent
						}
						relative_power = {
							who = prev
							category = all
							value < overwhelming
						}
					}
				}
			}
			OR = {
				owner = {
					is_gestalt = yes
					has_monthly_income = {
						resource = alloys
						value > 6
					}
					has_monthly_income = {
						resource = minerals
						value > 50
					}
				}
				AND = {
					owner = {
						is_regular_empire = yes
						has_monthly_income = {
							resource = minerals
							value > 80
						}
					}
					jobs_work_minerals_goods = yes
				}
				owner = {
					is_regular_empire = yes
					AND = {
						has_monthly_income = {
							resource = consumer_goods
							value > 25
						}
						has_monthly_income = {
							resource = minerals
							value > 50
						}
					}
				}
			}
		}
		modifier = {
			factor = 0
			free_jobs > 3
		}
		modifier = {
			weight = 100
			free_building_slots = 0
			has_building_construction = no
		}#Repairs
	}
}

#lrsk_adv_civ_building_techbarb_ruins = {
#	is_listed = no
#	icon = "lrsk_adv_civ_techbarb_ruins"
#
#	cost = {}
#
#	# Temp upkeep
#	required_resources = {
#		energy = 2
#		minerals = 1
#	}
#
#	produced_resources = {
#		#food = 1
#
#		# Until quest works, it just gives this
#		engineering_research = 1
#		physics_research = 1
#		society_research = 1
#		unity = 1
#		influence = 1
#
#	}
#
#  produced_resource_trigger = {
#		modifier = {
#			has_country_flag = lrsk_adv_civ_restored_labs
#			resources = {
#    		engineering_research = 4
#    		physics_research = 4
#    		society_research = 4
#			}
#		}
#	}
#
#	produced_resource_trigger = {
#		modifier = {
#			has_country_flag = lrsk_adv_civ_restored_industry
#			resources = {
#				energy = 2
#  			minerals = 2
#			}
#		}
#	}
#
#  triggered_planet_modifier = {
#    potential {
#      has_country_flag = lrsk_adv_civ_restored_industry
#    }
#    modifier {
#      tile_resource_energy_mult = 0.10
#      tile_resource_minerals_mult = 0.10
#    }
#  }
#
#	produced_resource_trigger = {
#		modifier = {
#			has_country_flag = lrsk_adv_civ_restored_entertainment
#			resources = {
#        unity = 2
#			}
#		}
#	}
#
#  triggered_planet_modifier = {
#    potential {
#      has_country_flag = lrsk_adv_civ_restored_entertainment
#    }
#    modifier {
#      tile_resource_unity_mult = 0.10
#    }
#  }
#
#	produced_resource_trigger = {
#		modifier = {
#			has_country_flag = lrsk_adv_civ_restored_records
#			resources = {
#        influence = 1
#			}
#		}
#	}
#
#  triggered_planet_modifier = {
#    potential {
#      has_country_flag = lrsk_adv_civ_restored_defences
#    }
#    modifier {
#      planet_fortification_strength = 0.5
#    }
#  }
#
#	upgrades = {
#	}
#
#	ai_replace = no
#	event_building = yes
#}
